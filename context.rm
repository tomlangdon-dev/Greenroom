Video Asset Manager — Project Context

What It Is

A local-first web app (Mac) for managing video assets and Brainsuite AI test results. Built for a creative agency producer with no formal dev background.

Tech Stack

Backend: Python + Flask
Database: SQLite (via database.py)
Frontend: Single HTML file — vanilla JS, no frameworks
Launcher: python3 launch.py
URL: http://127.0.0.1:5000 (not localhost — Safari quirk on managed Mac)
File Structure



CampaignManager/
├── app.py                  ← Flask server + all API routes
├── database.py             ← SQLite schema + connection
├── database.db             ← Live database
├── launch.py               ← App launcher
├── repair.py               ← Reusable Python file rebuilder
├── requirements.txt        ← flask only
├── templates/
│   └── index.html          ← Entire frontend (HTML/CSS/JS)
└── uploads/
├── videos/             ← Copies of uploaded video files
└── pptx/               ← Copies of uploaded PPTX reports
What's Built

Backend (app.py) — all current routes:
Route	Method	Purpose
/	GET	Serves index.html
/uploads/videos/<filename>	GET	Serves video files
/api/folders	GET	List all folders
/api/folders	POST	Create folder {name, parent_id}
/api/folders/<id>	PUT	Rename folder
/api/folders/<id>	DELETE	Hard-delete folder + all contained assets + files
/api/folders/<id>/count	GET	Count assets recursively in folder
/api/assets	GET	List assets ?folder_id=X
/api/assets/<id>	DELETE	Hard-delete asset + files
/api/assets/<id>	PUT	Move asset to folder {folder_id}
/api/versions/<asset_id>	GET	List versions for asset
/api/upload	POST	Upload video + optional PPTX
/api/versions/<id>/report	POST	Pair report with existing version
/api/projects/stats	GET	Asset counts + score distribution per project
Database Schema:
sql


folders   — id, name, parent_id (CASCADE on delete), created_at
assets    — id, folder_id (SET NULL on delete), base_name, created_at
versions  — id, asset_id (CASCADE), version_number, video_filename,
        video_path, pptx_filename, pptx_path, ace_score,
        kpi_data (JSON), asset_info (JSON), thumbnail (base64),
        is_latest, uploaded_at
Frontend (index.html) — features:
Home view: Project picker — cards showing asset count + ACE score distribution bar (green/amber/red/unscored). Right-click to rename/delete projects.
Project view: Dark sidebar with folder tree scoped to current project. Breadcrumb navigation. Sub-folder cards + asset cards in main grid.
Asset cards: Thumbnail (from PPTX or auto-generated from video). Hover to scrub video preview. ACE score badge. Right-click context menu (Add Report / Move / Delete).
Upload modal: Drag-and-drop video + optional PPTX. PPTX parsed in browser using BrainSurgeon logic (JSZip). Auto-generates thumbnail from video if no PPTX. Filename mismatch warning before pairing.
Detail/player view: Video player + ACE score panel. Version dropdown. Add/Replace Report button. Score breakdown by category (Attention, Branding, Processing, Emotional, Persuasion) with KPI-level detail.
Folder management: Create, rename, delete (with asset count warning). Drag asset cards onto folder cards to move. Right-click folders for rename/delete.
Key Design Decisions

Projects = Top-level folders
No separate projects table. A "project" is simply a root-level folder (parent_id = NULL). The home view shows these as project cards.

Versions
Same filename uploaded twice = new version of same asset. Different filename = new asset. is_latest = 1 on the most recent version.

PPTX Parsing
Done entirely in the browser using JSZip (lifted from a separate tool called BrainSurgeon). Flask never parses PPTX. Parsed JSON (kpi_data) and thumbnail (base64) are sent alongside the file upload.

ACE Score
Weighted average of 5 categories: Branding (×5), Attention (×3), Processing/Emotional/Persuasion (×1 each). Green ≥67, Amber 34–66, Red <34.

File storage
Uploaded files are copies in uploads/. Originals are never touched. Safe to hard-delete copies from the app.

Report–Video pairing check
Brainsuite encodes the video filename (dot removed, lowercased, special chars stripped) into the PPTX filename. Mismatch check normalises both names (/[^a-z0-9]/g stripped) and checks in both directions — video token in PPTX, and PPTX core (boilerplate stripped) in video token.

Code Delivery Constraints

This is important for future sessions:

HTML files → send as a standalone code block → renders as artifact in chat → use the code view tab on the artifact → copy → paste into templates/index.html
Python files → use the repair.py setup script approach. Every Python change is written as a repair.py that rewrites the target file using chr(32) for indentation and chr(10) for newlines (avoids chat stripping whitespace). Run with python3 repair.py.
VS Code is the editor. Python 3.14.3 installed. Managed corporate Mac — no shell script execution, python3 only.
Related Tools (separate repos)

AutoBS (Chrome extension)
Automates Brainsuite upload form. Manages campaign settings, queues multiple uploads, captures results from the web results page. Scrapes ACE scores, category scores, and KPI data from the live Brainsuite results page (not from PPTX).

BrainSurgeon (web app)
Parses Brainsuite PPTX reports. Extracts ACE score, 5-category breakdown, 17 KPIs with red/amber/green status. Comparison mode for before/after versions. The parsing logic from this app is embedded directly in index.html (the parsePPTX() function and supporting functions).

Known Limitations / Future Work

Sidebar drag-to-folder not yet implemented (cards can be dragged onto folder cards in the grid only)
Cloud/remote access not yet implemented (SharePoint is company mandate but IT access is a blocker; private cloud TBD)
No export functionality yet
"All Assets" root view not implemented (by design — assets live inside projects)
